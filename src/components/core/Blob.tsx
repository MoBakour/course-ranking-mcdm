import { motion, useAnimation } from "framer-motion";
import { useEffect } from "react";

const blobShapes = [
    "M408.5,289Q385,328,363.5,368.5Q342,409,296,416Q250,423,210.5,405Q171,387,112,375.5Q53,364,31.5,307Q10,250,35,195Q60,140,117.5,130Q175,120,212.5,109.5Q250,99,309.5,72Q369,45,389,101.5Q409,158,420.5,204Q432,250,408.5,289Z",
    "M465.5,311Q460,372,417.5,419Q375,466,312.5,467Q250,468,203,440.5Q156,413,119.5,379.5Q83,346,72,298Q61,250,74,203Q87,156,115,110Q143,64,196.5,35Q250,6,310,24Q370,42,389,100.5Q408,159,439.5,204.5Q471,250,465.5,311Z",
    "M433.64873,301.84276Q428.94501,353.68552,387.24129,384.36174Q345.53758,415.03797,297.76879,433.95431Q250,452.87065,208.57397,423.37994Q167.14794,393.88924,122.28699,371.53718Q77.42603,349.18513,51.29667,299.59256Q25.16732,250,57.67622,203.79628Q90.18513,157.59256,119.37955,115.97211Q148.57397,74.35166,199.28699,38.98141Q250,3.61115,305.62045,29.97211Q361.2409,56.33307,393.37955,102.4907Q425.5182,148.64834,431.93532,199.32417Q438.35245,250,433.64873,301.84276Z",
    "M389.90859,285.54258Q372.14904,321.08517,361.35536,372.70852Q350.56168,424.33187,300.28084,440.15529Q250,455.97871,211.39574,419.69787Q172.79148,383.41703,148.82122,352.7511Q124.85096,322.08517,68.33187,286.04258Q11.81277,250,38.84471,197.02129Q65.87665,144.04258,109.33407,113.31277Q152.79148,82.58297,201.39574,60.93613Q250,39.28929,293.33407,69.18503Q336.66813,99.08077,396.59361,114.8638Q456.51909,130.64684,432.09361,190.32342Q407.66813,250,389.90859,285.54258Z",
];

interface AnimatedBlobProps {
    className: string;
    speed: number;
}

const AnimatedBlob = ({ className, speed }: AnimatedBlobProps) => {
    const controls = useAnimation();

    useEffect(() => {
        const animate = async () => {
            while (true) {
                for (const shape of blobShapes) {
                    await controls.start({
                        d: shape,
                        transition: { duration: speed, ease: "easeInOut" },
                    });
                }
            }
        };
        animate();
    }, [controls]);

    return (
        <svg
            viewBox="0 0 500 500"
            xmlns="http://www.w3.org/2000/svg"
            className={className}
        >
            <motion.path
                fill="currentColor"
                initial={{ d: blobShapes[0] }}
                animate={controls}
            />
        </svg>
    );
};

export default AnimatedBlob;
